"use strict";function _slicedToArray(t,a){return _arrayWithHoles(t)||_iterableToArrayLimit(t,a)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,a){var e=[],r=!0,n=!1,o=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done)&&(e.push(l.value),!a||e.length!==a);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return e}function _arrayWithHoles(t){if(Array.isArray(t))return t}(function(){var Lax=function(){function intrp(t,a){for(var e=0;t[e][0]<=a&&void 0!==t[e+1];)e+=1;var r=t[e][0],n=void 0===t[e-1]?r:t[e-1][0],o=t[e][1],l=void 0===t[e-1]?o:t[e-1][1],i=Math.min(Math.max((a-n)/(r-n),0),1),s=i*(o-l)+l;return s}function fnOrVal(s){return"("===s[0]?eval(s):parseFloat(s)}var lax={elements:[]},lastY=0,currentBreakpoint="default",breakpointsSeparator="_",transformFns={"data-lax-opacity":function(t,a){t.opacity=a},"data-lax-translate":function(t,a){t.transform+=" translate(".concat(a,"px, ").concat(a,"px)")},"data-lax-translate-x":function(t,a){t.transform+=" translateX(".concat(a,"px)")},"data-lax-translate-y":function(t,a){t.transform+=" translateY(".concat(a,"px)")},"data-lax-scale":function(t,a){t.transform+=" scale(".concat(a,")")},"data-lax-scale-x":function(t,a){t.transform+=" scaleX(".concat(a,")")},"data-lax-scale-y":function(t,a){t.transform+=" scaleY(".concat(a,")")},"data-lax-skew":function(t,a){t.transform+=" skew(".concat(a,"deg, ").concat(a,"deg)")},"data-lax-skew-x":function(t,a){t.transform+=" skewX(".concat(a,"deg)")},"data-lax-skew-y":function(t,a){t.transform+=" skewY(".concat(a,"deg)")},"data-lax-rotate":function(t,a){t.transform+=" rotate(".concat(a,"deg)")},"data-lax-rotate-x":function(t,a){t.transform+=" rotateX(".concat(a,"deg)")},"data-lax-rotate-y":function(t,a){t.transform+=" rotateY(".concat(a,"deg)")},"data-lax-brightness":function(t,a){t.filter+=" brightness(".concat(a,"%)")},"data-lax-contrast":function(t,a){t.filter+=" contrast(".concat(a,"%)")},"data-lax-hue-rotate":function(t,a){t.filter+=" hue-rotate(".concat(a,"deg)")},"data-lax-blur":function(t,a){t.filter+=" blur(".concat(a,"px)")},"data-lax-invert":function(t,a){t.filter+="  invert(".concat(a,"%)")},"data-lax-saturate":function(t,a){t.filter+="  saturate(".concat(a,"%)")},"data-lax-grayscale":function(t,a){t.filter+="  grayscale(".concat(a,"%)")},"data-lax-bg-pos":function(t,a){t.backgroundPosition="".concat(a,"px ").concat(a,"px")},"data-lax-bg-pos-x":function(t,a){t.backgroundPositionX="".concat(a,"px")},"data-lax-bg-pos-y":function(t,a){t.backgroundPositionY="".concat(a,"px")}};return lax.presets={},lax.addPreset=function(t,a){lax.presets[t]=a},lax.setup=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lax.breakpoints=t.breakpoints||{},lax.selector=t.selector||".lax",lax.populateElements()},lax.removeElement=function(t){var a=lax.elements.findIndex(function(a){return a.el=t});a>-1&&lax.elements.splice(a,1)},lax.createLaxObject=function(t){var a={el:t,originalStyle:{transform:t.style.transform,filter:t.style.filter},transforms:{}};return a},lax.calcTransforms=function(t){for(var a=t.el,e=[],r=0;r<a.attributes.length;r++){var n=a.attributes[r];n.name.indexOf("data-lax-preset")>-1&&e.push(n)}for(var o=function(t){var r=e[t],n=r.name.split(breakpointsSeparator),o=n[1]?"".concat(breakpointsSeparator).concat(n[1]):"";r.value.split(" ").forEach(function(t){var e=t.split("-"),r=lax.presets[e[0]];if(r){var n=r(e[1]);for(var l in n)a.setAttribute("".concat(l).concat(o),n[l])}else console.log("lax error: preset ".concat(e[0]," is not defined"))});var l=a.getAttribute("data-lax-anchor");l&&""!==l||a.setAttribute("data-lax-anchor","self"),a.attributes.removeNamedItem(r.name)},l=0;l<e.length;l++)o(l);var i=!(a.attributes["data-lax-use-gpu"]&&"false"===a.attributes["data-lax-use-gpu"].value);if(i&&(a.style["backface-visibility"]="hidden",a.style["-webkit-backface-visibility"]="hidden"),a.attributes["data-lax-use-gpu"]&&a.attributes.removeNamedItem("data-lax-use-gpu"),t.optimise=!1,a.attributes["data-lax-optimize"]&&"true"===a.attributes["data-lax-optimize"].value){t.optimise=!0;var s=a.getBoundingClientRect();a.setAttribute("data-lax-opacity","".concat(-s.height-1," 0, ").concat(-s.height," 1, ").concat(window.innerHeight," 1, ").concat(window.innerHeight+1," 0")),a.attributes.removeNamedItem("data-lax-optimize")}for(var c=0;c<a.attributes.length;c++){var u=a.attributes[c];if(!(u.name.indexOf("data-lax")<0)){var f=u.name.split(breakpointsSeparator),d=f[0].split("-"),p=f[1]||"default";if("lax"===d[1])if("data-lax-horizontal"===u.name)t["data-lax-horizontal"]=!0;else if("data-lax-anchor"===u.name){t["data-lax-anchor"]="self"===u.value?a:document.querySelector(u.value);var x=t["data-lax-anchor"].getBoundingClientRect();t["data-lax-horizontal"]||(t.anchorTop=Math.floor(x.top)+window.scrollY)}else(function(){var e=u.value.replace(/vw/g,window.innerWidth).replace(/vh/g,window.innerHeight).replace(/elh/g,a.clientHeight).replace(/elw/g,a.clientWidth).replace(/\s+/g," "),r=e.split("|"),n=_slicedToArray(r,2),o=n[0],l=n[1],i={};l&&l.split(" ").forEach(function(t){var a=t.split("="),e=_slicedToArray(a,2),r=e[0],n=e[1];i[r]=r&&fnOrVal(n)});var s=f[0],c=o.split(",").map(function(t){return t.trim().split(" ").map(fnOrVal)}).sort(function(t,a){return t[0]-a[0]});t.transforms[s]||(t.transforms[s]={}),t.transforms[s][p]={valueMap:c,options:i}})()}}var m=a.attributes["data-lax-sprite-data"]&&a.attributes["data-lax-sprite-data"].value;if(m){t.spriteData=m.split(",").map(function(t){return parseInt(t)}),a.style.height=t.spriteData[1]+"px",a.style.width=t.spriteData[0]+"px";var v=a.attributes["data-lax-sprite-image"]&&a.attributes["data-lax-sprite-image"].value;v&&(a.style.backgroundImage="url(".concat(v,")"))}return t},lax.addElement=function(t){var a=lax.calcTransforms(lax.createLaxObject(t));lax.elements.push(a),lax.updateElement(a)},lax.populateElements=function(){lax.elements=[],document.querySelectorAll(lax.selector).forEach(lax.addElement),currentBreakpoint=lax.getCurrentBreakPoint()},lax.updateElements=function(){lax.elements.forEach(function(t){lax.calcTransforms(t),lax.updateElement(t)}),currentBreakpoint=lax.getCurrentBreakPoint()},lax.getCurrentBreakPoint=function(){var t="default",a=window.innerWidth;for(var e in lax.breakpoints){var r=parseFloat(lax.breakpoints[e]);if(!(r<=a))break;t=e}return t},lax.updateElement=function(t){var a=t.originalStyle,e=t.anchorTop,r=t.transforms,n=t.spriteData,o=t.el,l=e?e-lastY:lastY,i={transform:a.transform,filter:a.filter};for(var s in r){var c=r[s][currentBreakpoint]||r[s].default;if(c){var u=l;c.options.offset&&(u+=c.options.offset),c.options.speed&&(u*=c.options.speed),c.options.loop&&(u%=c.options.loop);var f=transformFns[s],d=intrp(c.valueMap,u);f&&f(i,d)}}if(n){var p=_slicedToArray(n,5),x=p[0],m=p[1],v=p[2],g=p[3],h=p[4],b=Math.floor(lastY/h)%v,y=b%g,k=Math.floor(b/g);i.backgroundPosition="-".concat(y*x,"px -").concat(k*m,"px")}if(0===i.opacity)o.style.opacity=0;else for(var w in i)o.style[w]=i[w]},lax.update=function(t){lastY!==t&&(lastY=t,lax.elements.forEach(lax.updateElement))},lax};"undefined"!=typeof module&&void 0!==module.exports?module.exports=Lax:window.Lax=Lax})();