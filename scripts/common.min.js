function disableScrollPointer(){document.body.style.pointerEvents="none",window.addEventListener("wheel",preventDefault,{passive:!1}),scrollPointerDisabled=!0}function enableScrollPointer(){document.body.style.pointerEvents="auto",window.removeEventListener("wheel",preventDefault),scrollPointerDisabled=!1}function preventDefault(e){e.preventDefault()}function scrollToCity(){var e=document.querySelector(".city"),t=e?e.getBoundingClientRect().top:0,n=window.pageYOffset;anime({targets:"html, body",scrollTop:t+n,duration:350,easing:"easeInOutSine"})}function scrollToInfo(e){var t=document.querySelector(".top"),n=t?t.getBoundingClientRect().top:0;anime({targets:"html, body",scrollTop:n+window.pageYOffset+window.innerHeight,duration:350,easing:"easeInOutSine",complete:e||function(){}})}function scrollToTop(e){var t=document.querySelector(".top"),n=t?t.getBoundingClientRect().top:0;anime({targets:"html, body",scrollTop:n+window.pageYOffset,duration:350,easing:"easeInOutSine",complete:e||function(){}})}function addAnim(e){var t,n,o="object"!=typeof e?e:"",i="./animation/";if(e.container)return n=e.className?e.className:"city-graphics__anim"+(e.name?" city-graphics__anim_"+e.name:""),t=lottie.loadAnimation({container:e.container,renderer:"canvas",loop:!0,autoplay:!0,path:i+(e.file||(e.name||o)+".json"),rendererSettings:{preserveAspectRatio:e.ratio||"xMidYMax slice",className:n}}),t.addEventListener("DOMLoaded",function(){t.container.style.zIndex="number"==typeof e.zIndex?e.zIndex:1}),t}function hideTopElem(){var e=document.querySelector(".top"),t="top_hidden",n=window.pageYOffset-(e?e.offsetHeight:0),o=document.querySelector(".city"),i="city_top-hidden";requestAnimationFrame(function(){e.classList.add(t),o.classList.add(i),window.scrollTo(window.pageXOffset,n)})}function showTopElem(){var e,t=document.querySelector(".top"),n="top_hidden",o=document.querySelector(".city"),i="city_top-hidden";t.classList.remove(n),e=window.pageYOffset+t.offsetHeight,requestAnimationFrame(function(){window.scrollTo(window.pageXOffset,e),requestAnimationFrame(function(){o.classList.remove(i)})})}function showFooterElem(){var e=document.querySelector(".page__footer"),t="footer_hidden",n=document.querySelector(".city"),o="city_footer-visible",i=window.pageYOffset+n.getBoundingClientRect().top;e.classList.remove(t),requestAnimationFrame(function(){n.classList.add(o),window.scrollTo(window.pageXOffset,i)})}function hideFooterElem(){var e=document.querySelector(".page__footer"),t="footer_hidden",n=document.querySelector(".city"),o="city_footer-visible",i=window.pageYOffset+n.getBoundingClientRect().top;requestAnimationFrame(function(){e.classList.add(t),n.classList.remove(o),window.scrollTo(window.pageXOffset,i)})}function replacePath(e){e="/"+e,e+="/",requestAnimationFrame(function(){history.replaceState({},document.title,e+location.search)})}window.addEventListener("load",function(){document.body.style.opacity=1}),function(){function e(e){f=(new Date).getTime(),window.cancelAnimationFrame(w),w=window.requestAnimationFrame(t)}function t(){f+m>=(new Date).getTime()?w=window.requestAnimationFrame(t):(a&&a.classList.contains(d)&&i(),window.pageYOffset>=p&&(o(),window.innerWidth,window.innerWidth>=768&&(replacePath(data.cityPath),app.cityInView=!0)))}function n(){p=document.body.scrollHeight-window.innerHeight,p=Math.floor(p*(1-u))}function o(){r.classList.remove(l),s.classList.add(c),i()}function i(){window.removeEventListener("scroll",e),window.removeEventListener("resize",n)}var r=document.querySelector(".page__footer"),a=document.querySelector(".zones"),s=document.querySelector(".city"),c="city_footer-visible",d="zones_visible",l="footer_hidden",u=.003,m=750,f=0,w=-1,p=0;n(),e(),window.addEventListener("scroll",e),window.addEventListener("resize",n)}(),function(){function e(){t.update(window.scrollY),o&&n.update(o.scrollLeft),window.requestAnimationFrame(e)}var t=new Lax,n=new Lax,o=document.querySelector(".zones__inner");document.querySelector(".top__info");t.addPreset("topZoomIn",function(){return{"data-lax-scale_medium":"0 1, (vh/2) 1.05"}}),t.addPreset("topFadeOut",function(){return{"data-lax-opacity_medium":"0 1, (vh/2) 0"}}),t.addPreset("topSlideOut",function(){return{"data-lax-translate-x_medium":"0 0, (vh/2) (-elw)"}}),t.addPreset("infoFadeIn",function(){return{"data-lax-opacity_medium":"(vh/3) 0, (vh/1.5) 1"}}),t.addPreset("cityMaskFadeOut",function(){return{"data-lax-opacity_medium":"0 0, (vh) 1, (vh*2) 0 | loop=(vh*2)"}}),t.addPreset("cityMaskFadeIn",function(){return{"data-lax-opacity_medium":"0 0, (-vh) 1"}}),n.addPreset("zones",function(){return{"data-lax-opacity_medium":"0 0,(vw) 1"}}),t.setup({selector:"[data-lax-winY]",breakpoints:{medium:768}}),n.setup({selector:"[data-lax-zones]",breakpoints:{medium:768}}),window.requestAnimationFrame(e),window.addEventListener("resize",function(){t.updateElements(),n.updateElements()})}(),function(){document.querySelector(".zones");var e=document.querySelector(".zones__inner"),t="zones__inner_no-background",n=!0;e.addEventListener("scroll",function(){if(e.scrollLeft<=0)return app.zonesVisible=!1,app.activeZone=null,e.classList.remove("zones__inner_visible"),showFooterElem(),void(n=!1);e.scrollLeft<=window.innerWidth&&!e.classList.contains(t)&&e.classList.add(t),e.scrollLeft>window.innerWidth&&e.classList.contains(t)&&e.classList.remove(t),e.scrollLeft>=e.scrollWidth-window.innerWidth&&window.pageYOffset<window.innerHeight/10?(showFooterElem(),n=!1):n||(hideFooterElem(),n=!0)})}(),function(){function e(e){return Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX}function t(e,t){var n=e.scrollHeight-e.clientHeight;return t<0&&e.scrollTop<=0||e.scrollTop>=n&&t>0}var n,o,i,r=document.querySelector(".zones__inner");window.addEventListener("wheel",function(a){var s=a.target.closest(".mb-content")||a.target.closest("[data-wheel-ignore]");if(i=e(a),s){if(!t(s,i))return;a.preventDefault(),a.stopPropagation()}app.zonesVisible&&(n=r.scrollWidth-r.offsetWidth,o=r.scrollLeft,o>=n&&i>=0||o>=n&&window.pageYOffset>0||(a.preventDefault(),a.stopPropagation(),r.scrollLeft+=i))},{passive:!1})}(),function(){function e(){d=(new Date).getTime(),-1==c&&(c=window.requestAnimationFrame(t))}function t(){if(d+l<(new Date).getTime())return window.cancelAnimationFrame(t),c=-1,void n();c=window.requestAnimationFrame(t)}function n(){var e=document.querySelectorAll(r),t=document.querySelectorAll(a),n=i(e);if("number"!=typeof n||app.zonesVisible||(disableScrollPointer(),anime({targets:"html,body",scrollTop:n,duration:350,easing:"easeInOutQuad",complete:enableScrollPointer})),t&&t.length)for(var s,c=0,d=t.length;c<d;c++)s=o(t[c]),"number"==typeof s&&s!=t[c].scrollLeft&&(app.zonesVisible||(disableScrollPointer(),anime({targets:t[c],scrollLeft:s,duration:350,easing:"easeInOutQuad",complete:enableScrollPointer})))}function o(e){var t=window.innerWidth*s,n=e.scrollWidth-window.innerWidth;return e.scrollLeft<=t?0:e.scrollLeft+t>n?n:void 0}function i(e){for(var t=parseInt(s*window.innerHeight),n=[],o=null,i=1/0,r=0,a=e.length;r<a;r++)rect=e[r].getBoundingClientRect(),o=Math.abs(rect.top),o<=t&&o>0&&n.push(rect.top);if(!n.length)return null;for(r=0,a=n.length;r<a;r++)Math.abs(n[r])<i&&(i=n[r]);return window.pageYOffset+i}var r="[data-scrollize-elem]",a="[data-scrollize-parent]",s=.25,c=-1,d=0,l=1e3;window.addEventListener("scroll",e);for(var u=0,m=document.querySelectorAll(a),f=m.length;u<f;u++)m[u].addEventListener("scroll",e)}(),function(){var e=document.querySelector(".city-graphics__animations"),t=document.querySelector(".city-graphics__animations_bg");window.innerWidth>768&&(addAnim({name:"full",container:e,zIndex:1}),addAnim({name:"clouds_old",container:t,zIndex:1}))}(),function(){function e(){var e=window.innerWidth,a=window.innerHeight,s=t.offsetHeight,c=Math.max(e/o,a/i);n.style.backgroundPosition="center bottom "+-(i*c-s)*r+"px"}var t=document.querySelector(".city-graphics__images"),n=document.querySelector(".city-graphics"),o=3e3,i=1686,r=.125;e(),window.addEventListener("resize",e)}(),function(){function e(){var s=new Date,d=s.getHours()%12,l=s.getMinutes(),u=d*o+r+o/60*l,m=l*i+r;t.style.transform="translate("+a+") rotate("+u+"deg)",n.style.transform="translate("+c+") rotate("+m+"deg)",setTimeout(e,5e3)}var t=document.querySelector(".city-graphics__svg-path_hour"),n=document.querySelector(".city-graphics__svg-path_minute"),o=30,i=6,r=-90,a="2553px, 1121px",s="-0.45% 0.67%",c="2539px,1132px";t&&n&&(t.style.transformOrigin=s,e())}(),function(){function e(){if(!(window.innerWidth>=768)){if(t.style.height=window.innerHeight+"px",app&&app.zonesVisible&&window.scrollTo(window.pageXOffset,0),n+i<(new Date).getTime())return window.cancelAnimationFrame(o),void(o=-1);o=window.requestAnimationFrame(e)}}var t=document.querySelector(".zones"),n=0,o=-1,i=500;window.addEventListener("resize",function(t){n=(new Date).getTime(),-1==o&&(o=window.requestAnimationFrame(e))})}(),function(){function e(o){if(n=o.touches[0].screenY,i=(new Date).getTime(),window.addEventListener("touchmove",t),app&&2==app.mobileDisplay)return window.removeEventListener("touchstart",e),void window.removeEventListener("touchmove",t)}function t(){var e=event.touches[0].screenY;if((new Date).getTime()-o>i)return n>e?app.mobileDisplay+=1:n<e&&(app.mobileDisplay-=1),void window.removeEventListener("touchmove",t)}var n=null,o=50,i=null;window.addEventListener("touchstart",e)}();